<div class="container fade-in">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0 fw-bold">
      <i class="bi bi-calendar-week me-2"></i>Routines
    </h2>
    <app-new-button
      text="New Routine"
      (onClick)="openCreateModal()">
    </app-new-button>
  </div>

  <app-list-card
    [items]="routines"
    [loading]="loading"
    [error]="error"
    [emptyMessage]="'No routines found. Click the New Routine button to add one.'"
    [showSearch]="false"
    [showFilter]="false"
    [icon]="'bi-calendar-week'"
    [getItemTitle]="getRoutineTitle"
    [getItemDescription]="getRoutineDescription"
    [getItemRouterLink]="getRoutineRouterLink"
    (itemClick)="onRoutineClick($event)">
    <ng-template let-routine>
      <div class="d-flex gap-2">
        <app-edit-button (onClick)="openEditModal(routine)"></app-edit-button>
        <app-delete-button (onClick)="deleteRoutine(routine.id)"></app-delete-button>
      </div>
    </ng-template>
  </app-list-card>
</div>

<app-create-edit-routine 
  *ngIf="showCreateModal" 
  [routineToEdit]="routineToEdit"
  (cancel)="onModalClosed()" 
  (created)="onRoutineCreated($event)"
  (updated)="onRoutineUpdated($event)">
</app-create-edit-routine>
